{% extends 'peliculas/base.html' %}
{% load static %}

{% block title %}
    Agregar Película
{% endblock %}

{% block content %}
    <style>
        .floating-input-group {
            position: relative;
            margin-bottom: 25px;
        }

        .floating-input-group .form-control {
            width: 100%;
            padding: 16px;
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .floating-input-group .form-control:focus {
            border-color: var(--primary-color);
            background: var(--secondary-color);
        }

        .floating-input-group textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }

        .floating-input-group input[type="date"].form-control {
            padding: 15px 16px;
        }

        .text-danger {
            color: var(--primary-color);
            font-size: 14px;
            margin-top: 5px;
            display: block;
        }
    </style>

    <section class="hero">
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h1 class="hero-title">Agregar Nueva Película</h1>
        </div>
    </section>

    <section class="section">
        <div class="container">
            {% if messages %}
            <div class="messages-container">
                {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">
                    {{ message }}
                </div>
                {% endfor %}
            </div>
            {% endif %}

            <div class="movie-container">
                <form method="post" class="review-form-container">
                    {% csrf_token %}
                    
                    <div class="content-section">
                        <h3 class="content-title">
                            Información Básica
                        </h3>
                        
                        <div class="info-grid" style="grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div class="info-item">
                                <label for="{{ form.titulo.id_for_label }}" class="info-label">
                                    Título *
                                </label>
                                <div class="floating-input-group">
                                    {{ form.titulo }}
                                </div>
                                {% if form.titulo.errors %}
                                    <div class="text-danger">
                                        {{ form.titulo.errors }}
                                    </div>
                                {% endif %}
                            </div>

                            <div class="info-item">
                                <label for="{{ form.titulo_original.id_for_label }}" class="info-label">
                                    Título Original
                                </label>
                                <div class="floating-input-group">
                                    {{ form.titulo_original }}
                                </div>
                            </div>

                            <div class="info-item" style="grid-column: span 2;">
                                <label for="{{ form.sinopsis.id_for_label }}" class="info-label">
                                    Sinopsis *
                                </label>
                                <div class="floating-input-group">
                                    {{ form.sinopsis }}
                                </div>
                                {% if form.sinopsis.errors %}
                                    <div class="text-danger">
                                        {{ form.sinopsis.errors }}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <div class="content-section">
                        <h3 class="content-title">
                            Detalles Técnicos
                        </h3>
                        
                        <div class="info-grid">
                            <div class="info-item">
                                <label for="{{ form.anio.id_for_label }}" class="info-label">
                                    Año de Estreno *
                                </label>
                                <div class="floating-input-group">
                                    {{ form.anio }}
                                </div>
                                {% if form.anio.errors %}
                                    <div class="text-danger">
                                        {{ form.anio.errors }}
                                    </div>
                                {% endif %}
                            </div>

                            <div class="info-item">
                                <label for="{{ form.fecha_estreno.id_for_label }}" class="info-label">
                                    Fecha de Estreno *
                                </label>
                                <div class="floating-input-group">
                                    {{ form.fecha_estreno }}
                                </div>
                                {% if form.fecha_estreno.errors %}
                                    <div class="text-danger">
                                        {{ form.fecha_estreno.errors }}
                                    </div>
                                {% endif %}
                            </div>

                            <div class="info-item">
                                <label for="{{ form.duracion.id_for_label }}" class="info-label">
                                    Duración (min) *
                                </label>
                                <div class="floating-input-group">
                                    {{ form.duracion }}
                                </div>
                                {% if form.duracion.errors %}
                                    <div class="text-danger">
                                        {{ form.duracion.errors }}
                                    </div>
                                {% endif %}
                            </div>

                            <div class="info-item">
                                <label for="{{ form.pais.id_for_label }}" class="info-label">
                                    País de Origen *
                                </label>
                                <div class="floating-input-group">
                                    {{ form.pais }}
                                </div>
                            </div>

                            <div class="info-item">
                                <label for="{{ form.idioma.id_for_label }}" class="info-label">
                                    Idioma Original *
                                </label>
                                <div class="floating-input-group">
                                    {{ form.idioma }}
                                </div>
                            </div>

                            <div class="info-item">
                                <label for="{{ form.clasificacion.id_for_label }}" class="info-label">
                                    Clasificación *
                                </label>
                                <div class="floating-input-group">
                                    {{ form.clasificacion }}
                                </div>
                                {% if form.clasificacion.errors %}
                                    <div class="text-danger">
                                        {{ form.clasificacion.errors }}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <div class="content-section">
                        <h3 class="content-title">
                            <i class="fas fa-theater-masks"></i> Géneros y Elenco
                        </h3>
                        
                        <div class="info-grid">
                            <div class="info-item">
                                <label class="info-label">
                                    Géneros *
                                </label>
                                <div style="max-height: 200px; overflow-y: auto; padding: 15px; background: var(--secondary-color); border-radius: 8px;">
                                    {% for checkbox in form.generos %}
                                    <div style="margin-bottom: 10px;">
                                        {{ checkbox.tag }}
                                        <label for="{{ checkbox.id_for_label }}" style="margin-left: 8px; cursor: pointer;">
                                            {{ checkbox.choice_label }}
                                        </label>
                                    </div>
                                    {% endfor %}
                                </div>
                                {% if form.generos.errors %}
                                    <div class="text-danger">
                                        {{ form.generos.errors }}
                                    </div>
                                {% endif %}
                            </div>

                            <div class="info-item">
                                <label class="info-label">
                                    Actores
                                </label>
                                <div style="max-height: 200px; overflow-y: auto; padding: 15px; background: var(--secondary-color); border-radius: 8px;">
                                    {% for checkbox in form.actores %}
                                    <div style="margin-bottom: 10px;">
                                        {{ checkbox.tag }}
                                        <label for="{{ checkbox.id_for_label }}" style="margin-left: 8px; cursor: pointer;">
                                            {{ checkbox.choice_label }}
                                        </label>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>

                            <div class="info-item">
                                <label for="{{ form.director.id_for_label }}" class="info-label">
                                    Director
                                </label>
                                <div class="floating-input-group">
                                    {{ form.director }}
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="content-section">
                        <h3 class="content-title">
                            Multimedia
                        </h3>
                        
                        <div class="info-grid">
                            <div class="info-item">
                                <label for="{{ form.poster.id_for_label }}" class="info-label">
                                    URL del Poster
                                </label>
                                <div class="floating-input-group">
                                    {{ form.poster }}
                                </div>
                                {% if form.poster.errors %}
                                    <div class="text-danger">
                                        {{ form.poster.errors }}
                                    </div>
                                {% endif %}
                            </div>

                            <div class="info-item">
                                <label for="{{ form.trailer.id_for_label }}" class="info-label">
                                    URL del Trailer
                                </label>
                                <div class="floating-input-group">
                                    {{ form.trailer }}
                                </div>
                                {% if form.trailer.errors %}
                                    <div class="text-danger">
                                        {{ form.trailer.errors }}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <div class="content-section">
                        <h3 class="content-title">
                            Información Financiera
                        </h3>
                        
                        <div class="info-grid">
                            <div class="info-item">
                                <label for="{{ form.presupuesto.id_for_label }}" class="info-label">
                                    Presupuesto (USD)
                                </label>
                                <div class="floating-input-group">
                                    {{ form.presupuesto }}
                                </div>
                                {% if form.presupuesto.errors %}
                                    <div class="text-danger">
                                        {{ form.presupuesto.errors }}
                                    </div>
                                {% endif %}
                            </div>

                            <div class="info-item">
                                <label for="{{ form.recaudacion.id_for_label }}" class="info-label">
                                    Recaudación (USD)
                                </label>
                                <div class="floating-input-group">
                                    {{ form.recaudacion }}
                                </div>
                                {% if form.recaudacion.errors %}
                                    <div class="text-danger">
                                        {{ form.recaudacion.errors }}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <div class="content-section" style="text-align: center; padding-top: 30px;">
                        <button type="submit" class="btn-trailer" style="margin-right: 15px;">
                            Guardar Película
                        </button>
                        <a href="{% url 'peliculas:index' %}" class="btn-secondary" style="display: inline-block; padding: 15px 30px;">
                            Cancelar
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </section>
{% endblock %}
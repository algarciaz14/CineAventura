{# Template de la p√°gina principal (Home) - Extiende la plantilla base de la aplicaci√≥n #}
{% extends 'peliculas/base.html' %}

{# Bloque principal de contenido de la p√°gina de inicio #}
{% block content %}

{# Secci√≥n Hero - Banner principal con buscador destacado #}
<section class="hero">
    {# Overlay oscuro sobre la imagen de fondo para mejorar legibilidad #}
    <div class="hero-overlay"></div>
    
    {# Contenido principal del hero #}
    <div class="hero-content">
        <h1 class="hero-title">Descubre el Mundo del Cine</h1>
        <p class="hero-subtitle">Miles de pel√≠culas, rese√±as y recomendaciones personalizadas</p>
        
        {# Buscador principal de pel√≠culas en el hero #}
        <form action="{% url 'peliculas:buscar' %}" method="get" class="hero-search">
            {# Campo de texto para la b√∫squeda #}
            <input type="text" name="q" placeholder="¬øQu√© pel√≠cula quieres ver hoy?" class="hero-search-input">
            {# Bot√≥n de env√≠o del formulario de b√∫squeda #}
            <button type="submit" class="hero-search-btn">Buscar</button>
        </form>
    </div>
</section>

{# Secci√≥n de Pel√≠culas Destacadas - Muestra pel√≠culas con mejor calificaci√≥n o destacadas #}
<section class="section">
    <div class="container">
        {# T√≠tulo de la secci√≥n con emoji decorativo #}
        <h2 class="section-title">üåü Pel√≠culas Destacadas</h2>
        
        {# Grid responsivo de tarjetas de pel√≠culas #}
        <div class="movies-grid">
            {# Itera sobre cada pel√≠cula destacada #}
            {% for pelicula in peliculas_destacadas %}
            <div class="movie-card">
                {# Enlace a la p√°gina de detalle de la pel√≠cula #}
                <a href="{% url 'peliculas:detalle' pelicula.id %}" class="movie-link">
                    
                    {# Secci√≥n del p√≥ster de la pel√≠cula #}
                    <div class="movie-poster">
                        {# Muestra el p√≥ster si existe, sino muestra un placeholder #}
                        {% if pelicula.poster %}
                        <img src="{{ pelicula.poster }}" alt="{{ pelicula.titulo }}">
                        {% else %}
                        <div class="movie-poster-placeholder">
                            <span>üé¨</span>
                        </div>
                        {% endif %}
                        
                        {# Badge flotante con la calificaci√≥n promedio (formato: 7.5) #}
                        <div class="movie-rating">
                            ‚≠ê {{ pelicula.calificacion_promedio|floatformat:1 }}
                        </div>
                    </div>
                    
                    {# Informaci√≥n textual de la pel√≠cula #}
                    <div class="movie-info">
                        {# T√≠tulo de la pel√≠cula #}
                        <h3 class="movie-title">{{ pelicula.titulo }}</h3>
                        {# A√±o de estreno #}
                        <p class="movie-year">{{ pelicula.a√±o }}</p>
                        
                        {# G√©neros de la pel√≠cula - Muestra solo los primeros 2 #}
                        <div class="movie-genres">
                            {% for genero in pelicula.generos.all|slice:":2" %}
                            <span class="genre-tag">{{ genero.nombre }}</span>
                            {% endfor %}
                        </div>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

{# Secci√≥n de Pel√≠culas Recientes - Muestra las √∫ltimas pel√≠culas agregadas al cat√°logo #}
<section class="section section-alt">
    <div class="container">
        {# T√≠tulo de la secci√≥n con emoji decorativo #}
        <h2 class="section-title">üÜï Agregadas Recientemente</h2>
        
        {# Grid responsivo de tarjetas de pel√≠culas #}
        <div class="movies-grid">
            {# Itera sobre cada pel√≠cula reciente #}
            {% for pelicula in peliculas_recientes %}
            <div class="movie-card">
                {# Enlace a la p√°gina de detalle de la pel√≠cula #}
                <a href="{% url 'peliculas:detalle' pelicula.id %}" class="movie-link">
                    
                    {# Secci√≥n del p√≥ster de la pel√≠cula #}
                    <div class="movie-poster">
                        {# Muestra el p√≥ster si existe, sino muestra un placeholder #}
                        {% if pelicula.poster %}
                        <img src="{{ pelicula.poster }}" alt="{{ pelicula.titulo }}">
                        {% else %}
                        <div class="movie-poster-placeholder">
                            <span>üé¨</span>
                        </div>
                        {% endif %}
                        
                        {# Badge flotante con la calificaci√≥n promedio (formato: 7.5) #}
                        <div class="movie-rating">
                            ‚≠ê {{ pelicula.calificacion_promedio|floatformat:1 }}
                        </div>
                    </div>
                    
                    {# Informaci√≥n textual de la pel√≠cula #}
                    <div class="movie-info">
                        {# T√≠tulo de la pel√≠cula #}
                        <h3 class="movie-title">{{ pelicula.titulo }}</h3>
                        {# A√±o de estreno #}
                        <p class="movie-year">{{ pelicula.a√±o }}</p>
                        
                        {# G√©neros de la pel√≠cula - Muestra solo los primeros 2 #}
                        <div class="movie-genres">
                            {% for genero in pelicula.generos.all|slice:":2" %}
                            <span class="genre-tag">{{ genero.nombre }}</span>
                            {% endfor %}
                        </div>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

{# Secci√≥n de G√©neros - Navegaci√≥n por categor√≠as de pel√≠culas #}
<section class="section">
    <div class="container">
        {# T√≠tulo de la secci√≥n con emoji decorativo #}
        <h2 class="section-title">üé≠ Explora por G√©nero</h2>
        
        {# Grid de tarjetas de g√©neros #}
        <div class="genres-grid">
            {# Itera sobre cada g√©nero disponible #}
            {% for genero in generos %}
            {# Enlace a la p√°gina de pel√≠culas filtradas por este g√©nero #}
            <a href="{% url 'peliculas:por_genero' genero.id %}" class="genre-card">
                {# Nombre del g√©nero #}
                <h3>{{ genero.nombre }}</h3>
                {# Contador de pel√≠culas en este g√©nero #}
                <p>{{ genero.peliculas.count }} pel√≠culas</p>
            </a>
            {% endfor %}
        </div>
    </div>
</section>

{% endblock %}
{% extends 'peliculas/base.html' %}

{% block title %}Buscar - AKA Films{% endblock %}

{% block content %}
<div class="search-page">
    <div class="search-header">
        <div class="container">
            <h1 class="search-title">Resultados de B√∫squeda</h1>
            {% if query %}
            <p class="search-query">Buscando: "{{ query }}"</p>
            {% if mensaje_error %}
            <p class="search-error" style="color: #ff6b6b; font-size: 1.1em; margin-top: 10px;">{{ mensaje_error }}</p>
            {% else %}
            <p class="search-count">{{ peliculas.count }} resultado{{ peliculas.count|pluralize }} encontrado{{ peliculas.count|pluralize }}</p>
            {% endif %}
            {% endif %}
        </div>
    </div>
    
    <div class="container">
        {% if mensaje_error %}
        <div class="no-results-container">
            <p class="no-results-hint">Intenta con una b√∫squeda m√°s espec√≠fica (m√≠nimo 3 caracteres).</p>
        </div>
        {% elif peliculas %}
        <div class="movies-grid">
            {% for pelicula in peliculas %}
            <div class="movie-card">
                <a href="{% url 'peliculas:detalle' pelicula.id %}" class="movie-link">
                    <div class="movie-poster">
                        {% if pelicula.poster %}
                        <img src="{{ pelicula.poster }}" alt="{{ pelicula.titulo }}">
                        {% else %}
                        <div class="movie-poster-placeholder">
                            <span>üé¨</span>
                        </div>
                        {% endif %}
                        <div class="movie-rating">
                            ‚≠ê {{ pelicula.calificacion_promedio|floatformat:1 }}
                        </div>
                    </div>
                    <div class="movie-info">
                        <h3 class="movie-title">{{ pelicula.titulo }}</h3>
                        <p class="movie-year">{{ pelicula.a√±o }}</p>
                        <div class="movie-genres">
                            {% for genero in pelicula.generos.all|slice:":2" %}
                            <span class="genre-tag">{{ genero.nombre }}</span>
                            {% endfor %}
                        </div>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
        {% elif query %}
        <div class="no-results-container">
            <p class="no-results">No se encontraron pel√≠culas que coincidan con tu b√∫squeda.</p>
            <p class="no-results-hint">Intenta con otros t√©rminos o explora nuestros g√©neros.</p>
        </div>
        {% else %}
        <div class="no-results-container">
            <p class="no-results-hint">Escribe algo en el buscador para encontrar pel√≠culas.</p>
        </div>
        {% endif %}
    </div>
</div>

<style>
.search-error {
    color: #ff6b6b !important;
    font-size: 1.1em;
    margin-top: 10px;
    font-weight: 500;
}
</style>
{% endblock %}